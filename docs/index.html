<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI & Cybersecurity Jobs â€“ USAJOBS</title>
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  <body>
    <main class="container">
      <header style="margin-bottom:2rem;">
        <h1 style="margin:0 0 .75rem;font-size:2rem;">Find Federal AI & Cybersecurity Roles</h1>
        <p style="margin:0;max-width:760px;color:var(--muted);font-size:1rem;line-height:1.5;">
          Updated each morning from official USAJOBS data. Fast, adâ€‘free, student & faculty friendly. 
          Browse openings, skim summaries, and subscribe for a single concise daily update (only if new jobs appear).
        </p>
      </header>
      
      <div class="grid">
        <a class="card" href="ai.html">
          <div>ðŸ¤– AI Jobs</div>
          <div class="muted" style="font-size:.9rem;margin-top:.5rem;">Machine Learning, Data Science, AI Development</div>
        </a>
        <a class="card" href="cyber.html">
          <div>ðŸ”’ Cybersecurity Jobs</div>
          <div class="muted" style="font-size:.9rem;margin-top:.5rem;">InfoSec, Cyber Defense, Security Analysis</div>
        </a>
      </div>

      <section class="subscription-section">
        <h2>ðŸ“¬ Daily Email (Optional)</h2>
        <p style="max-width:720px;margin-top:0;">
          Want this in your inbox? We post <strong>one discussion per day</strong> only if new jobs were found. 
          Subscribing takes ~10 seconds; unsubscribe anytime.
        </p>
        
        <div class="subscription-grid">
          <div class="subscription-option">
            <h3>ï¿½ Email (GitHub Discussions)</h3>
            <ol style="text-align:left;margin:0 0 1.25rem;padding-left:1.1rem;font-size:.85rem;line-height:1.4;">
              <li>Open the subscription page</li>
              <li>Click <strong>Watch</strong> â†’ <strong>Custom</strong></li>
              <li>Check <strong>Discussions</strong></li>
              <li>Done â€“ youâ€™ll get the next update</li>
            </ol>
            <a id="gh-discussions" href="#" class="sub-btn secondary" target="_blank" rel="noopener">Subscribe (Email)</a>
          </div>
          
          <div class="subscription-option">
            <h3>ðŸ’¬ Discord (Optional)</h3>
            <p style="font-size:.85rem;line-height:1.4;">Rich embeds & perâ€‘job drops (pilot). Email is simplestâ€”Discord channel invite coming soon.</p>
            <a href="#" class="sub-btn" id="discord-sub">Discord (Coming Soon)</a>
          </div>
        </div>
        
        <div style="margin-top:1.75rem;padding:1rem 1.25rem;background:#0f1115;border-radius:.6rem;border:1px solid #2a2e36;">
          <h4 style="margin:0 0 .75rem;color:var(--accent);font-size:.95rem;display:flex;align-items:center;gap:.4rem;">ðŸ“Š Todayâ€™s Snapshot</h4>
          <div style="display:flex;flex-wrap:wrap;gap:1.25rem;font-size:.85rem;">
            <div><span class="muted">AI:</span> <strong id="ai-count">â€“</strong></div>
            <div><span class="muted">Cyber:</span> <strong id="cyber-count">â€“</strong></div>
            <div><span class="muted">Last Update:</span> <span id="last-updated">â€“</span></div>
          </div>
          <div style="margin-top:.6rem;font-size:.7rem;color:var(--muted);max-width:620px;">
            Posts appear only if new roles were found since yesterday. No noise on quiet days.
          </div>
        </div>
      </section>

      <section style="margin:3rem 0 2rem;">
        <h2 style="margin:0 0 .75rem;">Why This Exists</h2>
        <p style="margin:0 0 1.25rem;color:var(--muted);max-width:780px;font-size:.95rem;line-height:1.55;">
          Federal AI and Cybersecurity hiring is broad and changes daily. This board saves students and advisors time by consolidating relevant roles into a single glanceable feed with quick filters and optional low-noise email alerts.
        </p>
        <h3 style="margin:1.5rem 0 .5rem;font-size:1rem;">Tips</h3>
        <ul style="margin:0 0 1.5rem;padding-left:1.1rem;font-size:.8rem;line-height:1.5;color:var(--muted);max-width:700px;">
          <li>Use the search box on category pages to filter by location, agency, or keyword.</li>
          <li>Open roles earlyâ€”some close before the listed end date once applicant limits are hit.</li>
          <li>Save links to roles you apply for; USAJOBS pages update after status changes.</li>
        </ul>
      </section>
    </main>

    <script>
  // Load job counts for stats
      Promise.all([
        fetch('data/ai_jobs.json').then(r => r.json()),
        fetch('data/cyber_jobs.json').then(r => r.json())
      ]).then(([aiData, cyberData]) => {
        const aiJobs = Array.isArray(aiData) ? aiData : (aiData.jobs || []);
        const cyberJobs = Array.isArray(cyberData) ? cyberData : (cyberData.jobs || []);
        
        document.getElementById('ai-count').textContent = aiJobs.length;
        document.getElementById('cyber-count').textContent = cyberJobs.length;
        
        // Get last updated from the more recent dataset
        const aiDate = aiData.generated_at ? new Date(aiData.generated_at) : null;
        const cyberDate = cyberData.generated_at ? new Date(cyberData.generated_at) : null;
        const lastUpdate = aiDate && cyberDate ? (aiDate > cyberDate ? aiDate : cyberDate) : (aiDate || cyberDate);
        
        if (lastUpdate) {
          document.getElementById('last-updated').textContent = lastUpdate.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
        }
      }).catch(() => {
        document.getElementById('ai-count').textContent = 'N/A';
        document.getElementById('cyber-count').textContent = 'N/A';
        document.getElementById('last-updated').textContent = 'N/A';
      });

      // Compute GitHub Discussions link dynamically based on Pages URL
      try {
        const host = window.location.hostname; // e.g., owner.github.io
        const owner = host.split('.')[0];
        const pathParts = window.location.pathname.split('/').filter(Boolean);
        const repo = pathParts.length > 0 ? pathParts[0] : '';
        const ghDiscussions = document.getElementById('gh-discussions');
        if (owner && repo && ghDiscussions) {
          ghDiscussions.href = `https://github.com/${owner}/${repo}/discussions`;
        }
      } catch (e) {}

      // Discord subscription placeholder
      document.getElementById('discord-sub').addEventListener('click', (e) => {
        e.preventDefault();
        alert('Discord server setup is pending. For now, watch this GitHub repository or subscribe to discussions for updates!');
      });
    </script>
  </body>
</html>
